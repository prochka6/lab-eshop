<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>
	<ui:composition template="/WEB-INF/templates/tmplSimple.xhtml">
		<ui:param name="pageTitle" value="EShop - Change password" />

		<ui:define name="canvas">

			<div class="panel">
				<div class="panel-title">Change password</div>

				<h:form>
					<h:messages globalOnly="true" />

					<div class="form-field">
						<h:outputLabel for="OldPassword" value="Old password" />
						<p:password value="#{usersPasswordBean.oldPassword}"
							id="OldPassword" required="true"
							requiredMessage="Old Password required">
							<f:validator validatorId="userPasswordCorrectnessValidator" />
						</p:password>
						<h:message for="OldPassword" errorClass="errorRequired" />
					</div>

					<div class="form-field">
						<h:outputLabel for="password" value="New password" />
						<p:password id="password" binding="#{passwordComponent}"
							value="#{usersPasswordBean.editUser.password}" required="true"
							requiredMessage="New Password required" />
						<h:message for="password" errorClass="errorRequired" />
					</div>

					<div class="form-field">
						<h:outputLabel for="confirmPassword" value="Confirm new password" />
						<p:password id="confirmPassword"
							required="#{not empty passwordComponent.value}"
							requiredMessage="New Password confirmation required">
							<f:validator validatorId="confirmPasswordValidator" />
							<f:attribute name="passwordComponent"
								value="#{passwordComponent}" />
						</p:password>
						<h:message for="confirmPassword" errorClass="errorRequired" />
					</div>

					<p:commandButton type="submit" value="Change password"
						action="#{usersPasswordBean.update}" ajax="false" />
					<p:button value="Storno" outcome="accountDetail" />
				</h:form>
			</div>
		</ui:define>
	</ui:composition>

</h:body>

</html>